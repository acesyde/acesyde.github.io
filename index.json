[{"content":"Having a pool is a good idea because previous summers have been so hot, as well as for relaxing after work, but in the other hand, it can be very useful to limit the power consumption of the pool pump motor.\nRequirements To achieve this feature, I bought\nINTEX SX1500 SONOFF ZBMini OWON THS317-ET In my home automation I prefer to use only zigbee devices\nInstallation In my case, the INTEX SX1500 cannot be triggered directly because it has a built-in scheduler, so I opened the electrical box and bypassed this feature to trigger the pool pump directly.\nAfter that I wired the pump with the ZBMini, easy to do I put the temperature sensor in the water and the electrinic box with the ZBMini Go to home assistant, open zigbee2mqtt and pair each new device In my case, the life of OWON THS317-ETbattery is about 12 months\nHassio and NodeRed Open your home assistant instance do this :\nHelpers Create a new helper like mine\nFlow Open Node Red and create a new flow\nAdd a cron Check the current \u0026ldquo;Pool mode\u0026rdquo; Get the temperaturature sensor value Check if the temperature Lower than 19° Between 19°and 28° Greather than 28° Set the delay in milliseconds and display value Generate a wait for Call home assistant service to start / stop the pump You can reuse mine by importing this code\n[{\u0026#34;id\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;tab\u0026#34;,\u0026#34;label\u0026#34;:\u0026#34;Piscine\u0026#34;,\u0026#34;disabled\u0026#34;:false,\u0026#34;info\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;env\u0026#34;:[]},{\u0026#34;id\u0026#34;:\u0026#34;54f86a2f80028e81\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;api-current-state\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Temperature piscine\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:3,\u0026#34;outputs\u0026#34;:1,\u0026#34;halt_if\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;halt_if_type\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;halt_if_compare\u0026#34;:\u0026#34;is\u0026#34;,\u0026#34;entity_id\u0026#34;:\u0026#34;sensor.temperature_piscine_temperature\u0026#34;,\u0026#34;state_type\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;blockInputOverrides\u0026#34;:false,\u0026#34;outputProperties\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;temperature\u0026#34;,\u0026#34;propertyType\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;entityState\u0026#34;}],\u0026#34;for\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;forType\u0026#34;:\u0026#34;num\u0026#34;,\u0026#34;forUnits\u0026#34;:\u0026#34;minutes\u0026#34;,\u0026#34;override_topic\u0026#34;:false,\u0026#34;state_location\u0026#34;:\u0026#34;payload\u0026#34;,\u0026#34;override_payload\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;entity_location\u0026#34;:\u0026#34;data\u0026#34;,\u0026#34;override_data\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;x\u0026#34;:460,\u0026#34;y\u0026#34;:720,\u0026#34;wires\u0026#34;:[[\u0026#34;41106ef97c8b87d1\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;09e62ee1149b049d\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;cronplus\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Filtration\u0026#34;,\u0026#34;outputField\u0026#34;:\u0026#34;payload\u0026#34;,\u0026#34;timeZone\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;persistDynamic\u0026#34;:false,\u0026#34;commandResponseMsgOutput\u0026#34;:\u0026#34;output1\u0026#34;,\u0026#34;outputs\u0026#34;:1,\u0026#34;options\u0026#34;:[{\u0026#34;name\u0026#34;:\u0026#34;schedule1\u0026#34;,\u0026#34;topic\u0026#34;:\u0026#34;topic1\u0026#34;,\u0026#34;payloadType\u0026#34;:\u0026#34;default\u0026#34;,\u0026#34;payload\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;expressionType\u0026#34;:\u0026#34;cron\u0026#34;,\u0026#34;expression\u0026#34;:\u0026#34;0 12,20 * * *\u0026#34;,\u0026#34;location\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;offset\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;solarType\u0026#34;:\u0026#34;all\u0026#34;,\u0026#34;solarEvents\u0026#34;:\u0026#34;sunrise,sunset\u0026#34;}],\u0026#34;x\u0026#34;:60,\u0026#34;y\u0026#34;:720,\u0026#34;wires\u0026#34;:[[\u0026#34;5ba7f500dec07972\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;41106ef97c8b87d1\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;switch\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Temps de filtration\u0026#34;,\u0026#34;property\u0026#34;:\u0026#34;temperature\u0026#34;,\u0026#34;propertyType\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;rules\u0026#34;:[{\u0026#34;t\u0026#34;:\u0026#34;lt\u0026#34;,\u0026#34;v\u0026#34;:\u0026#34;19\u0026#34;,\u0026#34;vt\u0026#34;:\u0026#34;num\u0026#34;},{\u0026#34;t\u0026#34;:\u0026#34;btwn\u0026#34;,\u0026#34;v\u0026#34;:\u0026#34;19\u0026#34;,\u0026#34;vt\u0026#34;:\u0026#34;num\u0026#34;,\u0026#34;v2\u0026#34;:\u0026#34;28\u0026#34;,\u0026#34;v2t\u0026#34;:\u0026#34;num\u0026#34;},{\u0026#34;t\u0026#34;:\u0026#34;gt\u0026#34;,\u0026#34;v\u0026#34;:\u0026#34;28\u0026#34;,\u0026#34;vt\u0026#34;:\u0026#34;num\u0026#34;}],\u0026#34;checkall\u0026#34;:\u0026#34;false\u0026#34;,\u0026#34;repair\u0026#34;:false,\u0026#34;outputs\u0026#34;:3,\u0026#34;x\u0026#34;:730,\u0026#34;y\u0026#34;:720,\u0026#34;wires\u0026#34;:[[\u0026#34;62487d3928d7818a\u0026#34;],[\u0026#34;d2d4dd97d3a866d6\u0026#34;],[\u0026#34;0c7a7c757d7beb72\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;b5e423120081925c\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;trigger\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Durée traitement\u0026#34;,\u0026#34;op1\u0026#34;:\u0026#34;on\u0026#34;,\u0026#34;op2\u0026#34;:\u0026#34;off\u0026#34;,\u0026#34;op1type\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;op2type\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;duration\u0026#34;:\u0026#34;250\u0026#34;,\u0026#34;extend\u0026#34;:false,\u0026#34;overrideDelay\u0026#34;:true,\u0026#34;units\u0026#34;:\u0026#34;ms\u0026#34;,\u0026#34;reset\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;bytopic\u0026#34;:\u0026#34;all\u0026#34;,\u0026#34;topic\u0026#34;:\u0026#34;topic\u0026#34;,\u0026#34;outputs\u0026#34;:2,\u0026#34;x\u0026#34;:1250,\u0026#34;y\u0026#34;:720,\u0026#34;wires\u0026#34;:[[\u0026#34;3ef0ae743e1b3881\u0026#34;],[\u0026#34;6ca837267708a777\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;62487d3928d7818a\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;change\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;1h\u0026#34;,\u0026#34;rules\u0026#34;:[{\u0026#34;t\u0026#34;:\u0026#34;set\u0026#34;,\u0026#34;p\u0026#34;:\u0026#34;delay\u0026#34;,\u0026#34;pt\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;3600000\u0026#34;,\u0026#34;tot\u0026#34;:\u0026#34;str\u0026#34;},{\u0026#34;t\u0026#34;:\u0026#34;set\u0026#34;,\u0026#34;p\u0026#34;:\u0026#34;filtration\u0026#34;,\u0026#34;pt\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;1h\u0026#34;,\u0026#34;tot\u0026#34;:\u0026#34;str\u0026#34;}],\u0026#34;action\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;property\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;from\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;reg\u0026#34;:false,\u0026#34;x\u0026#34;:990,\u0026#34;y\u0026#34;:660,\u0026#34;wires\u0026#34;:[[\u0026#34;b5e423120081925c\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;d2d4dd97d3a866d6\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;change\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;1h30\u0026#34;,\u0026#34;rules\u0026#34;:[{\u0026#34;t\u0026#34;:\u0026#34;set\u0026#34;,\u0026#34;p\u0026#34;:\u0026#34;delay\u0026#34;,\u0026#34;pt\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;5400000\u0026#34;,\u0026#34;tot\u0026#34;:\u0026#34;str\u0026#34;},{\u0026#34;t\u0026#34;:\u0026#34;set\u0026#34;,\u0026#34;p\u0026#34;:\u0026#34;filtration\u0026#34;,\u0026#34;pt\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;1h30\u0026#34;,\u0026#34;tot\u0026#34;:\u0026#34;str\u0026#34;}],\u0026#34;action\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;property\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;from\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;reg\u0026#34;:false,\u0026#34;x\u0026#34;:990,\u0026#34;y\u0026#34;:720,\u0026#34;wires\u0026#34;:[[\u0026#34;b5e423120081925c\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;0c7a7c757d7beb72\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;change\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;2h\u0026#34;,\u0026#34;rules\u0026#34;:[{\u0026#34;t\u0026#34;:\u0026#34;set\u0026#34;,\u0026#34;p\u0026#34;:\u0026#34;delay\u0026#34;,\u0026#34;pt\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;7200000\u0026#34;,\u0026#34;tot\u0026#34;:\u0026#34;str\u0026#34;},{\u0026#34;t\u0026#34;:\u0026#34;set\u0026#34;,\u0026#34;p\u0026#34;:\u0026#34;filtration\u0026#34;,\u0026#34;pt\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;2h\u0026#34;,\u0026#34;tot\u0026#34;:\u0026#34;str\u0026#34;}],\u0026#34;action\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;property\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;from\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;reg\u0026#34;:false,\u0026#34;x\u0026#34;:990,\u0026#34;y\u0026#34;:780,\u0026#34;wires\u0026#34;:[[\u0026#34;b5e423120081925c\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;3ef0ae743e1b3881\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;api-call-service\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Allumer piscine\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:5,\u0026#34;debugenabled\u0026#34;:false,\u0026#34;domain\u0026#34;:\u0026#34;switch\u0026#34;,\u0026#34;service\u0026#34;:\u0026#34;turn_on\u0026#34;,\u0026#34;areaId\u0026#34;:[],\u0026#34;deviceId\u0026#34;:[],\u0026#34;entityId\u0026#34;:[\u0026#34;switch.switch_piscine\u0026#34;],\u0026#34;data\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;dataType\u0026#34;:\u0026#34;jsonata\u0026#34;,\u0026#34;mergeContext\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;mustacheAltTags\u0026#34;:false,\u0026#34;outputProperties\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;message\u0026#34;,\u0026#34;propertyType\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;Allumée\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;str\u0026#34;}],\u0026#34;queue\u0026#34;:\u0026#34;none\u0026#34;,\u0026#34;x\u0026#34;:1520,\u0026#34;y\u0026#34;:660,\u0026#34;wires\u0026#34;:[[\u0026#34;7de9d7c35046f82d\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;7de9d7c35046f82d\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;ha-wait-until\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Wait on or retry\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:2,\u0026#34;outputs\u0026#34;:2,\u0026#34;entityId\u0026#34;:\u0026#34;switch.switch_piscine\u0026#34;,\u0026#34;entityIdFilterType\u0026#34;:\u0026#34;exact\u0026#34;,\u0026#34;property\u0026#34;:\u0026#34;state\u0026#34;,\u0026#34;comparator\u0026#34;:\u0026#34;is\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;on\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;timeout\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;timeoutType\u0026#34;:\u0026#34;num\u0026#34;,\u0026#34;timeoutUnits\u0026#34;:\u0026#34;minutes\u0026#34;,\u0026#34;checkCurrentState\u0026#34;:true,\u0026#34;blockInputOverrides\u0026#34;:true,\u0026#34;outputProperties\u0026#34;:[],\u0026#34;x\u0026#34;:1520,\u0026#34;y\u0026#34;:620,\u0026#34;wires\u0026#34;:[[\u0026#34;e82f89371205d55a\u0026#34;],[\u0026#34;3ef0ae743e1b3881\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;6ca837267708a777\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;api-call-service\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Eteindre piscine\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:5,\u0026#34;debugenabled\u0026#34;:false,\u0026#34;domain\u0026#34;:\u0026#34;switch\u0026#34;,\u0026#34;service\u0026#34;:\u0026#34;turn_off\u0026#34;,\u0026#34;areaId\u0026#34;:[],\u0026#34;deviceId\u0026#34;:[],\u0026#34;entityId\u0026#34;:[\u0026#34;switch.switch_piscine\u0026#34;],\u0026#34;data\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;dataType\u0026#34;:\u0026#34;jsonata\u0026#34;,\u0026#34;mergeContext\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;mustacheAltTags\u0026#34;:false,\u0026#34;outputProperties\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;message\u0026#34;,\u0026#34;propertyType\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;Eteinte\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;str\u0026#34;}],\u0026#34;queue\u0026#34;:\u0026#34;none\u0026#34;,\u0026#34;x\u0026#34;:1520,\u0026#34;y\u0026#34;:780,\u0026#34;wires\u0026#34;:[[\u0026#34;2e25dea1e10644d6\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;2e25dea1e10644d6\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;ha-wait-until\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Wait off or retry\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:2,\u0026#34;outputs\u0026#34;:2,\u0026#34;entityId\u0026#34;:\u0026#34;switch.switch_piscine\u0026#34;,\u0026#34;entityIdFilterType\u0026#34;:\u0026#34;exact\u0026#34;,\u0026#34;property\u0026#34;:\u0026#34;state\u0026#34;,\u0026#34;comparator\u0026#34;:\u0026#34;is\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;off\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;timeout\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;timeoutType\u0026#34;:\u0026#34;num\u0026#34;,\u0026#34;timeoutUnits\u0026#34;:\u0026#34;minutes\u0026#34;,\u0026#34;checkCurrentState\u0026#34;:true,\u0026#34;blockInputOverrides\u0026#34;:true,\u0026#34;outputProperties\u0026#34;:[],\u0026#34;x\u0026#34;:1520,\u0026#34;y\u0026#34;:820,\u0026#34;wires\u0026#34;:[[\u0026#34;e82f89371205d55a\u0026#34;],[\u0026#34;6ca837267708a777\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;5ba7f500dec07972\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;api-current-state\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Mode piscine\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:3,\u0026#34;outputs\u0026#34;:2,\u0026#34;halt_if\u0026#34;:\u0026#34;Normal\u0026#34;,\u0026#34;halt_if_type\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;halt_if_compare\u0026#34;:\u0026#34;is\u0026#34;,\u0026#34;entity_id\u0026#34;:\u0026#34;input_select.mode_piscine\u0026#34;,\u0026#34;state_type\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;blockInputOverrides\u0026#34;:false,\u0026#34;outputProperties\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;mode\u0026#34;,\u0026#34;propertyType\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;entityState\u0026#34;}],\u0026#34;for\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;forType\u0026#34;:\u0026#34;num\u0026#34;,\u0026#34;forUnits\u0026#34;:\u0026#34;minutes\u0026#34;,\u0026#34;override_topic\u0026#34;:false,\u0026#34;state_location\u0026#34;:\u0026#34;payload\u0026#34;,\u0026#34;override_payload\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;entity_location\u0026#34;:\u0026#34;data\u0026#34;,\u0026#34;override_data\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;x\u0026#34;:230,\u0026#34;y\u0026#34;:720,\u0026#34;wires\u0026#34;:[[\u0026#34;54f86a2f80028e81\u0026#34;],[]]},{\u0026#34;id\u0026#34;:\u0026#34;b5bb7276d000536a\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;server-state-changed\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Mode continu\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:4,\u0026#34;exposeToHomeAssistant\u0026#34;:false,\u0026#34;haConfig\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;name\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;icon\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;}],\u0026#34;entityidfilter\u0026#34;:\u0026#34;input_select.mode_piscine\u0026#34;,\u0026#34;entityidfiltertype\u0026#34;:\u0026#34;exact\u0026#34;,\u0026#34;outputinitially\u0026#34;:false,\u0026#34;state_type\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;haltifstate\u0026#34;:\u0026#34;Continu\u0026#34;,\u0026#34;halt_if_type\u0026#34;:\u0026#34;str\u0026#34;,\u0026#34;halt_if_compare\u0026#34;:\u0026#34;is\u0026#34;,\u0026#34;outputs\u0026#34;:2,\u0026#34;output_only_on_state_change\u0026#34;:true,\u0026#34;for\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;forType\u0026#34;:\u0026#34;num\u0026#34;,\u0026#34;forUnits\u0026#34;:\u0026#34;minutes\u0026#34;,\u0026#34;ignorePrevStateNull\u0026#34;:false,\u0026#34;ignorePrevStateUnknown\u0026#34;:false,\u0026#34;ignorePrevStateUnavailable\u0026#34;:false,\u0026#34;ignoreCurrentStateUnknown\u0026#34;:false,\u0026#34;ignoreCurrentStateUnavailable\u0026#34;:false,\u0026#34;outputProperties\u0026#34;:[],\u0026#34;x\u0026#34;:130,\u0026#34;y\u0026#34;:860,\u0026#34;wires\u0026#34;:[[\u0026#34;9a74a6afbea67721\u0026#34;],[\u0026#34;9e74d356eeff4c52\u0026#34;]]},{\u0026#34;id\u0026#34;:\u0026#34;9a74a6afbea67721\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;api-call-service\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Allumer piscine\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:5,\u0026#34;debugenabled\u0026#34;:false,\u0026#34;domain\u0026#34;:\u0026#34;switch\u0026#34;,\u0026#34;service\u0026#34;:\u0026#34;turn_on\u0026#34;,\u0026#34;areaId\u0026#34;:[],\u0026#34;deviceId\u0026#34;:[],\u0026#34;entityId\u0026#34;:[\u0026#34;switch.switch_piscine\u0026#34;],\u0026#34;data\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;dataType\u0026#34;:\u0026#34;jsonata\u0026#34;,\u0026#34;mergeContext\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;mustacheAltTags\u0026#34;:false,\u0026#34;outputProperties\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;message\u0026#34;,\u0026#34;propertyType\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;Allumée\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;str\u0026#34;}],\u0026#34;queue\u0026#34;:\u0026#34;none\u0026#34;,\u0026#34;x\u0026#34;:380,\u0026#34;y\u0026#34;:840,\u0026#34;wires\u0026#34;:[[]]},{\u0026#34;id\u0026#34;:\u0026#34;9e74d356eeff4c52\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;api-call-service\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Eteindre piscine\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;version\u0026#34;:5,\u0026#34;debugenabled\u0026#34;:false,\u0026#34;domain\u0026#34;:\u0026#34;switch\u0026#34;,\u0026#34;service\u0026#34;:\u0026#34;turn_off\u0026#34;,\u0026#34;areaId\u0026#34;:[],\u0026#34;deviceId\u0026#34;:[],\u0026#34;entityId\u0026#34;:[\u0026#34;switch.switch_piscine\u0026#34;],\u0026#34;data\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;dataType\u0026#34;:\u0026#34;jsonata\u0026#34;,\u0026#34;mergeContext\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;mustacheAltTags\u0026#34;:false,\u0026#34;outputProperties\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;message\u0026#34;,\u0026#34;propertyType\u0026#34;:\u0026#34;msg\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;Eteinte\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;str\u0026#34;}],\u0026#34;queue\u0026#34;:\u0026#34;none\u0026#34;,\u0026#34;x\u0026#34;:380,\u0026#34;y\u0026#34;:900,\u0026#34;wires\u0026#34;:[[]]},{\u0026#34;id\u0026#34;:\u0026#34;e82f89371205d55a\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;ha-sensor\u0026#34;,\u0026#34;z\u0026#34;:\u0026#34;483e9a57b37cdc8d\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Filtration piscine\u0026#34;,\u0026#34;entityConfig\u0026#34;:\u0026#34;ca7e7d1218501982\u0026#34;,\u0026#34;version\u0026#34;:0,\u0026#34;state\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;stateType\u0026#34;:\u0026#34;date\u0026#34;,\u0026#34;attributes\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;temperature\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;temperature\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;msg\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;duration\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;filtration\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;msg\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;last_start\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;date\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;last_stop\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;valueType\u0026#34;:\u0026#34;date\u0026#34;}],\u0026#34;inputOverride\u0026#34;:\u0026#34;allow\u0026#34;,\u0026#34;outputProperties\u0026#34;:[],\u0026#34;x\u0026#34;:1780,\u0026#34;y\u0026#34;:720,\u0026#34;wires\u0026#34;:[[]]},{\u0026#34;id\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;server\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;Home Assistant\u0026#34;,\u0026#34;version\u0026#34;:5,\u0026#34;addon\u0026#34;:true,\u0026#34;rejectUnauthorizedCerts\u0026#34;:true,\u0026#34;ha_boolean\u0026#34;:\u0026#34;y|yes|true|on|home|open\u0026#34;,\u0026#34;connectionDelay\u0026#34;:true,\u0026#34;cacheJson\u0026#34;:true,\u0026#34;heartbeat\u0026#34;:false,\u0026#34;heartbeatInterval\u0026#34;:30,\u0026#34;areaSelector\u0026#34;:\u0026#34;friendlyName\u0026#34;,\u0026#34;deviceSelector\u0026#34;:\u0026#34;friendlyName\u0026#34;,\u0026#34;entitySelector\u0026#34;:\u0026#34;friendlyName\u0026#34;,\u0026#34;statusSeparator\u0026#34;:\u0026#34;at: \u0026#34;,\u0026#34;statusYear\u0026#34;:\u0026#34;hidden\u0026#34;,\u0026#34;statusMonth\u0026#34;:\u0026#34;short\u0026#34;,\u0026#34;statusDay\u0026#34;:\u0026#34;numeric\u0026#34;,\u0026#34;statusHourCycle\u0026#34;:\u0026#34;h23\u0026#34;,\u0026#34;statusTimeFormat\u0026#34;:\u0026#34;h:m\u0026#34;,\u0026#34;enableGlobalContextStore\u0026#34;:true},{\u0026#34;id\u0026#34;:\u0026#34;ca7e7d1218501982\u0026#34;,\u0026#34;type\u0026#34;:\u0026#34;ha-entity-config\u0026#34;,\u0026#34;server\u0026#34;:\u0026#34;c083033.86b9\u0026#34;,\u0026#34;deviceConfig\u0026#34;:\u0026#34;\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;sensor config for Filtration piscine\u0026#34;,\u0026#34;version\u0026#34;:6,\u0026#34;entityType\u0026#34;:\u0026#34;sensor\u0026#34;,\u0026#34;haConfig\u0026#34;:[{\u0026#34;property\u0026#34;:\u0026#34;name\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;filtration_piscine\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;device_class\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;icon\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;unit_of_measurement\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;state_class\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;},{\u0026#34;property\u0026#34;:\u0026#34;last_reset\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;\u0026#34;}],\u0026#34;resend\u0026#34;:true}] And now you have a flow like this\nHassio In home assistant you can create a dashboard like this now\nEt voilà, now it\u0026rsquo;s time to swim and save your money \u0026#x1f604;\n","permalink":"https://blog.ace-dev.fr/posts/2023/01/howto-automate-your-swimmingpool/","summary":"\u003cp\u003eHaving a pool is a good idea because previous summers have been so hot, as well as for relaxing after work, but in the other hand, it can be very useful to limit the power consumption of the pool pump motor.\u003c/p\u003e","title":"How to automate your swimming pool"},{"content":"Since I built my house I want to automate everything and now it\u0026rsquo;s time to start a new project, my gate.\nHow to do Hardware So I bought a CAME BX-243 and it does not support home automation natively.\nThe CAME brand is slightly more expensive than the others but their equipment is much more solid and qualitative.\nThe installation is a bit complicated when you do it for the first time, but within a few hours the gate can be opened and closed without any problems\nTime to automate When I wanted to realize my automation I had some criteria\nHome Assistant compatibility Easy to use and configure Local polling Open source based The Smallest possible to fit in the gate box After several hours of research, I found this amazing mod\nShelly UNI on Amazon - ~15€\nWiring Shelly CAME VCC 10 N 11 IN_1 5 OUT1 GND 2 OUT1 AC/DC 7 Like this\nHow to flash it You can use it out of the box but I want to flash it with esphome and it\u0026rsquo;s easy\nConnect the device to my network Flash it with tasmota (https://github.com/yaourdt/mgos-to-tasmota) Flash it with tasmota minimal (http://ota.tasmota.com/tasmota/tasmota-minimal.bin.gz) Generate an esphome binary for my device like this in your home assistant ESPHome addons esphome: name: portail esp8266: board: esp01_1m # Enable logging logger: # Enable Home Assistant API api: encryption: key: \u0026#34;your_encryptionkey\u0026#34; ota: password: \u0026#34;your_password\u0026#34; wifi: ssid: !secret wifi_ssid password: !secret wifi_password # Enable fallback hotspot (captive portal) in case wifi connection fails ap: ssid: \u0026#34;Portail Fallback Hotspot\u0026#34; password: \u0026#34;your_password\u0026#34; captive_portal: web_server: port: 80 # Input #GPIO12 (1) #GPIO13 (2) # Output (Relay) # GPIO04 (2) # GPIO15 (1) binary_sensor: - platform: gpio id: gate_sensor name: \u0026#34;Gate Sensor\u0026#34; pin: GPIO12 filters: - delayed_on_off: 50ms switch: - platform: gpio pin: GPIO15 name: \u0026#34;Gate Switch\u0026#34; icon: \u0026#34;mdi:gate\u0026#34; id: gate_switch on_turn_on: - delay: 500ms - switch.turn_off: gate_switch cover: - platform: template name: \u0026#34;Portail\u0026#34; icon: \u0026#34;mdi:gate\u0026#34; device_class: gate lambda: |- if (id(gate_sensor).state) { return COVER_CLOSED; } else { return COVER_OPEN; } open_action: - switch.turn_on: gate_switch close_action: - switch.turn_on: gate_switch stop_action: - switch.turn_on: gate_switch optimistic: true assumed_state: false Now you can open/close the gate and know its state with your favorite home automation system.\nEt voilà !\n","permalink":"https://blog.ace-dev.fr/posts/2023/01/howto-automate-your-gate/","summary":"\u003cp\u003eSince I built my house I want to automate everything and now it\u0026rsquo;s time to start a new project, my gate.\u003c/p\u003e","title":"How to automate your gate"},{"content":"Hi 👋 My name is Pierre-Emmanuel Mercier\n🖥️ I\u0026rsquo;m a Software Architect 🏣 I’m currently working at Betclic Group (Gambling Company) 🏠 I live in France 💬 Ask me about .NET, Docker, AWS, Azure 🌐 Socials: 💻 Tech Stack: ","permalink":"https://blog.ace-dev.fr/about/","summary":"about","title":"💫 About Me"}]